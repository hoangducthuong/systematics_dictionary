An ideal Half Wave Plate (HWP) is an optical device that introduces a phase delay between the two orthogonal polarizations of the incoming signal. It can be made of birifringent crystals (e.g. Sapphire) or metamaterials. The HWP flips the polarization of incoming light along the fast axis of the crystal resulting in a polarization shift of $2\chi$, where $\chi$ is the incoming polarization angle of the light with respect to the fast axis. Thus, a HWP rotating with frequency $f_{m}$ modulates the incoming polarization at $2f_{m}$, which is detected in the bolometer timestreams at $4f_{m}$. The demodulation process described below summarizes the formalism defined in Kusaka \& Essinger-Hileman et al., 2014~\cite{ABS_HWP} and is an excerpt from~\cite{Simon_Thesis_2016}.

The detector timestream $d_{m}$ is composed of the unpolarized sky intensity $I$, the modulated polarization signal $P(\chi)$, white noise $N_{w}$, and spurious modulation signals $A(\chi)$ that depend on the HWP angle $\chi$ such that
\begin{equation}
d_{m}= I + P(\chi)+ N_{w} + A(\chi).
\end{equation}
The modulated polarization signal can be represented in terms of the Stokes $Q$ and $U$ parameters (Equation~\ref{eqn:Stokes}) as
\begin{equation}
P(\chi)=\epsilon \mathrm{Re}\{(Q+iU) m(\chi)\},
\end{equation}
where the modulation is given by $m(\chi)=\exp[-4 i \chi]$ and $\epsilon$ is the polarization modulation efficiency factor, which is close to one. The spurious modulation signals $A(\chi)$ consist of components at every harmonic $n$ of the HWP rotation frequency and can be decomposed into cosine and sine components as
\begin{equation}\label{eqn:achi}
A(\chi)= \sum_{n} A_n(\chi)=\sum_{n}\Big[ (A^{nc}_{0} + \lambda^{nc} I) \cos(n\chi) + (A^{ns}_{0} + \lambda^{ns} I) \sin(n\chi)    \Big].
\end{equation}
Here the $A_{0}$ terms are stable and independent of the sky intensity and the $\lambda$ terms are small~\cite{ABS_HWP}.

The demodulated timestream is, then, extracted by applying a bandpass filter to $d_{m}$ to account for the slight variations in $f_{m}$, multiplying $d_{m}$ by $m^*(\chi)$, and applying a low-pass filter that passes $f\lesssim2$~Hz to eliminate higher order terms and all $A^{nc,s}$ and $\lambda^{nc,s}$ terms other than the $n=4$ components. From~\cite{ABS_HWP}, the final demodulated timestream $d_{\bar{d}}$ is then given by
\begin{equation}
d_{\bar{d}}=\frac{1}{2}\Big(\epsilon Q + A^{4c}_{0} + \lambda^{4c} I \Big) + N^{\mathrm{Re}}_{w} + \frac{i}{2}\Big(\epsilon U + A^{4s}_{0} + \lambda^{4s} I \Big) + iN^{\mathrm{Im}}_{w}.
\end{equation}
